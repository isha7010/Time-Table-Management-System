<!DOCTYPE html>
<html>
<head>
    <title>Admin Dashboard | Time Table Management</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>

<!-- ================= HEADER ================= -->
<div class="header">
    <img src="{{ url_for('static', filename='images/vit_logo.png') }}">
    <h1>Admin Dashboard</h1>
    <h3>Time Table Management System</h3>
</div>

<div class="container">

    <!-- ================= VIEW TIMETABLE ================= -->
    <h2>View Timetable</h2>
    <div class="links">
        <a href="/view-timetable/A">Division A</a> |
        <a href="/view-timetable/B">Division B</a> |
        <a href="/view-timetable/C">Division C</a>
    </div>

    <hr>

    <!-- ================= ADD CLASS ================= -->
    <h2>Add Class</h2>
    <form method="post" action="/add-class">
        <input type="number" name="semester" placeholder="Semester" required>

        <input type="text" name="division" placeholder="Division (A / B / C)" required>

        <select name="student_shift_id" required>
            <option value="">-- Select Shift --</option>
            <option value="1">Morning (8:00 – 14:00)</option>
            <option value="2">Afternoon (12:00 – 18:00)</option>
        </select>

        <button type="submit">Add Class</button>
    </form>

    <!-- ================= EXISTING CLASSES ================= -->
    <h2>Existing Classes</h2>
    <table>
        <tr>
            <th>ID</th>
            <th>Semester</th>
            <th>Division</th>
            <th>Shift</th>
            <th>Action</th>
        </tr>

        {% for c in classes %}
        <tr>
            <td>{{ c.class_id }}</td>
            <td>{{ c.semester }}</td>
            <td>{{ c.division }}</td>
            <td>{{ c.student_shift_id }}</td>
            <td>
                <a href="/delete-class/{{ c.class_id }}">Delete</a>
            </td>
        </tr>
        {% endfor %}
    </table>

    <hr>

    <!-- ================= SUBJECTS ================= -->
    <h2>Subjects</h2>
    <table>
        <tr>
            <th>Subject</th>
            <th>Semester</th>
            <th>Hours / Week</th>
        </tr>

        {% for s in subjects %}
        <tr>
            <td>{{ s.subject_name }}</td>
            <td>{{ s.semester }}</td>
            <td>{{ s.hours_per_week }}</td>
        </tr>
        {% endfor %}
    </table>

    <hr>

    <!-- ================= ADD FACULTY ================= -->
    <h2>Add Faculty</h2>
    <form method="post" action="/add-faculty">
        <input type="text" name="faculty_name" placeholder="Faculty Name" required>

        <input type="number" name="max_hours_per_day" placeholder="Max Hours Per Day" required>

        <input type="number" name="max_hours_per_week" placeholder="Max Hours Per Week" required>

        <button type="submit">Add Faculty</button>
    </form>

    <hr>
 <!-- ================= ADD SUBJECT ================= -->
    <hr>
    <h2>Add Subject</h2>
<form method="post" action="/add-subject">
    <input type="text" name="subject_name" placeholder="Subject Name" required>

    <input type="number" name="semester" placeholder="Semester" required>

    <input type="number" name="hours_per_week" placeholder="Hours per Week" required>

    <button type="submit">Add Subject</button>
</form>
    <hr>


    <!-- ================= ASSIGN FACULTY TO SUBJECT ================= -->
    <h2>Assign Faculty to Subject</h2>

    <form method="post" action="/assign-faculty">

        <label>Select Class</label>
        <select name="class_id" required>
            <option value="">-- Select Class --</option>
            {% for c in classes %}
            <option value="{{ c.class_id }}">
                Sem {{ c.semester }} - Div {{ c.division }}
            </option>
            {% endfor %}
        </select>

        <label>Select Subject</label>
        <select name="subject_id" required>
            <option value="">-- Select Subject --</option>
            {% for s in subjects %}
            <option value="{{ s.subject_id }}">
                {{ s.subject_name }}
            </option>
            {% endfor %}
        </select>

        <label>Select Faculty</label>
        <select name="faculty_id" required>
            <option value="">-- Select Faculty --</option>
            {% for f in faculties %}
            <option value="{{ f.faculty_id }}">
                {{ f.faculty_name }}
            </option>
            {% endfor %}
        </select>

        <button type="submit">Assign Faculty</button>
    </form>

    

    <hr>

    <!-- ================= GENERATE TIMETABLE ================= -->
    <h2>Generate Timetable</h2>
    <form action="/generate-timetable">
        <button style="margin-top: 10px;">Generate Weekly Timetable</button>
    </form>

</div>

<!-- ================= FOOTER ================= -->
<div class="footer">
    © 2025–26 Vishwakarma Institute of Technology, Pune
</div>

</body>
</html>
